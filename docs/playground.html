---
layout: default
title: Interactive Playground
description: Try Treebark interactively with real-time examples and customizable templates
---

<link rel="stylesheet" href="{{ '/assets/css/playground.css' | relative_url }}">

<h1>üõù Interactive Playground</h1>

<p>Experiment with Treebark templates and data in real-time. Choose from built-in examples or create your own!</p>

<div class="controls">
    <div class="control-group">
        <label for="indent-type">Indent:</label>
        <select id="indent-type">
            <option value="none">None</option>
            <option value="spaces" selected>Spaces</option>
            <option value="tabs">Tabs</option>
        </select>
    </div>
    <div class="control-group">
        <label for="indent-size">Size:</label>
        <input type="number" id="indent-size" min="1" max="8" value="2">
    </div>
</div>

<div class="control-group">
    <label for="example-select">Load Example:</label>
    <select id="example-select" onchange="loadExampleFromDropdown()">
        <option value="">-- Select an example --</option>
        <option value="hello-world">Hello World</option>
        <option value="card-layout">Card Layout</option>
        <option value="list-binding">List Binding</option>
        <option value="user-profile">User Profile</option>
        <option value="shorthand-syntax">Shorthand Syntax</option>
        <option value="mixed-content">Mixed Content</option>
        <option value="stack-of-cards">Stack of Cards</option>
        <option value="root-array-binding">Root Array Binding</option>
        <option disabled>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</option>
        <option value="array-pattern-1-stack">üìö Pattern 1: Stack of Cards (no $bind, no $children)</option>
        <option value="array-pattern-2-property">üìö Pattern 2: $bind to Property (uses both)</option>
        <option value="array-pattern-3-direct">üìö Pattern 3: $bind: "." Direct Array (uses both)</option>
    </select>
</div>

<div class="error-display" id="error-display"></div>

<div class="playground-container">
    <div class="editor-panel">
        <div class="editor-header">
            Template Editor
        </div>
        <textarea 
            id="template-editor" 
            class="editor-textarea"
            spellcheck="false"
            placeholder="Enter your Treebark template here..."></textarea>
    </div>
    
    <div class="editor-panel">
        <div class="editor-header">
            Data Editor
        </div>
        <textarea 
            id="data-editor" 
            class="editor-textarea"
            spellcheck="false"
            placeholder="Enter your data (JSON format)..."></textarea>
    </div>
    
    <div class="output-panel">
        <div class="output-header">
            Generated HTML
        </div>
        <div class="output-content" id="html-output">
            <!-- Generated HTML will appear here -->
        </div>
    </div>
</div>

<script src="{{ '/assets/treebark-browser.js' | relative_url }}"></script>
<script>
// Example templates and data
// Example templates and data - loaded from external JSON file
let examples = {};

// Load examples from external JSON file to avoid Jekyll processing {{placeholders}}
async function loadExamples() {
    try {
        const response = await fetch('{{ "/assets/js/playground-examples.json" | relative_url }}');
        examples = await response.json();
        console.log('Examples loaded successfully');
    } catch (error) {
        console.error('Failed to load examples:', error);
        // Fallback: provide a minimal example if loading fails
        examples = {
            'hello-world': {
                template: {
                    div: {
                        class: "greeting",
                        $children: [
                            { h1: "Hello World!" },
                            { p: "Welcome to Treebark - safe HTML tree structures." }
                        ]
                    }
                },
                data: {}
            }
        };
    }
}

// Get DOM elements
const templateEditor = document.getElementById('template-editor');
const dataEditor = document.getElementById('data-editor');
const htmlOutput = document.getElementById('html-output');
const errorDisplay = document.getElementById('error-display');
const indentType = document.getElementById('indent-type');
const indentSize = document.getElementById('indent-size');

// Update output when inputs change
function updateOutput() {
    try {
        errorDisplay.style.display = 'none';
        
        const templateText = templateEditor.value.trim();
        const dataText = dataEditor.value.trim();
        
        if (!templateText) {
            htmlOutput.textContent = '';
            return;
        }
        
        // Parse template
        let template;
        try {
            template = JSON.parse(templateText);
        } catch (e) {
            throw new Error('Invalid JSON in template: ' + e.message);
        }
        
        // Parse data
        let data = {};
        if (dataText) {
            try {
                data = JSON.parse(dataText);
            } catch (e) {
                throw new Error('Invalid JSON in data: ' + e.message);
            }
        }
        
        // Get indent options
        let indent = false;
        if (indentType.value !== 'none') {
            const size = parseInt(indentSize.value) || 2;
            indent = indentType.value === 'tabs' ? '\t'.repeat(size) : ' '.repeat(size);
        }
        
        // Render using treebark
        const input = { template, data };
        const options = { indent };
        
        const html = window.Treebark ? window.Treebark.renderToString(input, options) : 'Treebark not loaded';
        
        htmlOutput.textContent = html;
        
    } catch (error) {
        errorDisplay.textContent = 'Error: ' + error.message;
        errorDisplay.style.display = 'block';
        htmlOutput.textContent = '';
    }
}

// Load example
function loadExample(exampleId) {
    const example = examples[exampleId];
    if (example) {
        templateEditor.value = JSON.stringify(example.template, null, 2);
        dataEditor.value = JSON.stringify(example.data, null, 2);
        updateOutput();
    }
}

// Load example from dropdown
function loadExampleFromDropdown() {
    const select = document.getElementById('example-select');
    const exampleId = select.value;
    if (exampleId) {
        loadExample(exampleId);
    }
}

// Event listeners
templateEditor.addEventListener('input', updateOutput);
dataEditor.addEventListener('input', updateOutput);
indentType.addEventListener('change', updateOutput);
indentSize.addEventListener('input', updateOutput);

// Load default example
document.addEventListener('DOMContentLoaded', async function() {
    await loadExamples();
    loadExample('hello-world');
});
</script>